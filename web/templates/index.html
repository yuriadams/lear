<h1 class="text-3xl font-bold text-center">Project King Lear Explorer</h1>
<form id="bookForm" class="mt-4 flex justify-center">
  <input type="text" id="bookIdInput" name="book_id" placeholder="Enter King Lear Book ID"
    class="border p-2 rounded-l-md w-64">
  <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-r-md">Fetch</button>
</form>

<div id="loading" class="hidden text-center mt-4">
  <div class="animate-spin rounded-full h-8 w-8 border-t-2 border-blue-500"></div>
</div>

<div class="mt-6 max-w-4xl mx-auto">
  <h2 class="text-2xl font-bold mb-4">Previously Analyzed Books</h2>
  {{ if .Books }}
    <ul class="list-disc pl-6">
      {{ range .Books }}
        <li>
          <a href="/books/{{ .GutenbergID }}" class="text-blue-500 hover:underline">
            {{ .Title }} by {{ .Author }}
          </a>
        </li>
      {{ end }}
    </ul>
  {{ else }}
    <p class="text-gray-500">No books have been analyzed yet.</p>
  {{ end }}
</div>

<script>
  document.getElementById("bookForm").addEventListener("submit", function(event) {
    event.preventDefault();
    document.getElementById("loading").classList.remove("hidden");
    const bookId = document.getElementById("bookIdInput").value.trim();
    if (bookId) {
      window.location.href = `/books/${bookId}`;
    }
  });
</script>
